[gd_scene load_steps=26 format=2]

[ext_resource path="res://GameLoop.gd" type="Script" id=1]
[ext_resource path="res://TileSets/BasicTileset3.tres" type="TileSet" id=2]
[ext_resource path="res://NavigationMap.gd" type="Script" id=3]
[ext_resource path="res://Player/Player.tscn" type="PackedScene" id=4]
[ext_resource path="res://EnemyManager.gd" type="Script" id=5]
[ext_resource path="res://Enemies/EnemyMimfle.tscn" type="PackedScene" id=6]
[ext_resource path="res://Enemies/EnemyBookcase.tscn" type="PackedScene" id=7]
[ext_resource path="res://FeatureManager.gd" type="Script" id=8]
[ext_resource path="res://Sprites/bookcase-front.png" type="Texture" id=9]
[ext_resource path="res://Sprites/chest-closed-front.png" type="Texture" id=10]
[ext_resource path="res://Sprites/chest-of-drawers-front.png" type="Texture" id=11]
[ext_resource path="res://Sprites/wardrobe-front.png" type="Texture" id=12]
[ext_resource path="res://Sprites/door-front.png" type="Texture" id=13]
[ext_resource path="res://Sprites/stairs-side-1.png" type="Texture" id=14]
[ext_resource path="res://Sprites/bed.png" type="Texture" id=15]
[ext_resource path="res://Sprites/barrel.png" type="Texture" id=16]
[ext_resource path="res://Features/Bed.tscn" type="PackedScene" id=17]
[ext_resource path="res://Features/ChestOfDrawers.tscn" type="PackedScene" id=18]
[ext_resource path="res://Features/Bookcase.tscn" type="PackedScene" id=19]
[ext_resource path="res://ItemManager.gd" type="Script" id=20]
[ext_resource path="res://UI/UI.tscn" type="PackedScene" id=21]
[ext_resource path="res://Themes/Themes.tres" type="Theme" id=22]
[ext_resource path="res://Themes/DefaultFont.tres" type="DynamicFont" id=23]
[ext_resource path="res://Audio/Music/The Liar Wizzard-Loop.ogg" type="AudioStream" id=24]

[sub_resource type="GDScript" id=1]
script/source = "extends \"res://Features/Feature.gd\"

export(PackedScene) var food
export(float) var spawn_chance

func set_sprite(sprite):
	.set_sprite(sprite)

func interact(player):
	if randf() <= spawn_chance:
		var item = food.instance()
		item.icon = item.get_node(\"Sprite\").texture
		player.ui.add_item(item)
		spawn_chance = -1
		return \"The stout wooden object contains some old food, which still looks edible...\"
	else:
		return \"The barrel is empty.\""

[node name="GameScene" type="Node2D"]
script = ExtResource( 1 )

[node name="GameWorld" type="TileMap" parent="."]
z_index = -1
tile_set = ExtResource( 2 )
cell_size = Vector2( 32, 32 )
format = 1
tile_data = PoolIntArray( -131065, 0, 0, -131064, 0, 1, -131063, 0, 1, -131062, 0, 1, -131061, 0, 1, -131060, 0, 2, -1, 0, 0, -65536, 0, 1, -65535, 0, 1, -65534, 0, 1, -65533, 0, 2, -65529, 0, 65536, -65528, 0, 65537, -65527, 0, 65537, -65526, 0, 65537, -65525, 0, 65537, -65524, 0, 65538, -65520, 0, 0, -65519, 0, 1, -65518, 0, 1, -65517, 0, 1, -65516, 0, 1, -65515, 0, 1, -65514, 0, 2, 65535, 0, 65536, 0, 0, 65537, 1, 0, 65537, 2, 0, 65537, 3, 0, 262144, 4, 0, 196612, 5, 0, 196612, 6, 0, 196612, 7, 0, 196609, 8, 0, 65537, 9, 0, 65537, 10, 0, 65537, 11, 0, 65537, 12, 0, 262144, 13, 0, 327684, 14, 0, 196612, 15, 0, 196612, 16, 0, 196609, 17, 0, 65537, 18, 0, 65537, 19, 0, 65537, 20, 0, 65537, 21, 0, 65537, 22, 0, 65538, 131071, 0, 131072, 65536, 0, 131073, 65537, 0, 131073, 65538, 0, 131073, 65539, 0, 131074, 65543, 0, 131072, 65544, 0, 131073, 65545, 0, 131073, 65546, 0, 131073, 65547, 0, 131073, 65548, 0, 131074, 65552, 0, 131072, 65553, 0, 131073, 65554, 0, 131073, 65555, 0, 131073, 65556, 0, 131073, 65557, 0, 131073, 65558, 0, 131074 )
script = ExtResource( 3 )

[node name="Player" parent="." instance=ExtResource( 4 )]
debug = true

[node name="Enemies" type="Node2D" parent="."]
script = ExtResource( 5 )

[node name="Enemy" parent="Enemies" instance=ExtResource( 6 )]
visible = false
position = Vector2( 288, -64 )

[node name="Enemy2" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 320, -64 )

[node name="Enemy3" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 672, -32 )
turn_speed = 1

[node name="Enemy4" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 576, 32 )
turn_speed = 1

[node name="Features" type="Node2D" parent="."]
editor/display_folded = true
script = ExtResource( 8 )
sprites = [ ExtResource( 9 ), ExtResource( 10 ), ExtResource( 11 ), ExtResource( 12 ), ExtResource( 13 ), ExtResource( 14 ), ExtResource( 15 ), ExtResource( 16 ) ]

[node name="Bed" parent="Features" instance=ExtResource( 17 )]
position = Vector2( 288, -64 )

[node name="ChestDrawers" parent="Features" instance=ExtResource( 18 )]
position = Vector2( 256, -64 )

[node name="ChestDrawers2" parent="Features" instance=ExtResource( 18 )]
position = Vector2( 352, -64 )

[node name="Bookcase" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 512, -32 )
ignore_resprite = true

[node name="Bookcase14" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 512, 32 )
script = SubResource( 1 )
type = 0
ignore_resprite = true

[node name="Bookcase2" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 544, -32 )
ignore_resprite = true

[node name="Bookcase10" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 544, 32 )
ignore_resprite = true

[node name="Bookcase3" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 576, -32 )
ignore_resprite = true

[node name="Bookcase4" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 608, -32 )
ignore_resprite = true

[node name="Bookcase11" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 608, 32 )
ignore_resprite = true

[node name="Bookcase5" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 640, -32 )
ignore_resprite = true

[node name="Bookcase9" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 640, 32 )
ignore_resprite = true

[node name="Bookcase12" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 672, 32 )
ignore_resprite = true

[node name="Bookcase7" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 704, -32 )
ignore_resprite = true

[node name="Bookcase13" parent="Features" instance=ExtResource( 19 )]
position = Vector2( 704, 32 )
ignore_resprite = true

[node name="Items" type="Node2D" parent="."]
script = ExtResource( 20 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" parent="CanvasLayer" instance=ExtResource( 21 )]
visible = false

[node name="GameOver" type="ColorRect" parent="CanvasLayer"]
editor/display_folded = true
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0, 0, 0, 1 )

[node name="Label" type="Label" parent="CanvasLayer/GameOver"]
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 22 )
custom_fonts/font = ExtResource( 23 )
text = "YOU DIED"
align = 1
valign = 1

[node name="Song" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 24 )
volume_db = -10.0
